# Introduce Paralleliztion and Memory Sharding to Cairo
<img width="1150" alt="Screenshot 2024-02-26 at 11 01 17 PM" src="https://github.com/STARKScale/ethdenver24-starknet-hh/assets/47396265/2d202450-8234-4a21-b743-127a1c038233">

---

This repository is the final submission from the [STARKScale](https://starkscale.vercel.app/) team for the Starknet Hacker House at ETHDenver 2024. It contains both the repository of the zk-hadoop and recursive verifiers that were completed in the time frame of the hackathon! 

# Project Overview
Our project pioneers large-scale zero-knowledge (ZK) computations by merging distributed systems with Incrementally Verifiable Computation (IVC). We address the scalability bottleneck inherent in sequential ZK languages by introducing parallelization and memory sharding, thereby distributing large datasets across multiple nodes.

# Cairo1 End to End zk-Hadoop
<img width="1568" alt="Cairo1_E2E" src="https://github.com/STARKScale/ethdenver24-starknet-hh/assets/91217444/257643c0-c596-4299-8bc9-ba9033f580bf">

- **Parallelization:** We overcome the sequential limitations of traditional ZK languages by enabling concurrent computation.
- **Memory Sharding:** By partitioning data across various nodes, we efficiently manage and process large datasets.
- **zk-Hadoop MapReduce:** Our system employs a zk-Hadoop map-reduce approach for matrix-vector multiplication. Users input data via input.json, which is then divided and processed by mapper and reducer nodes orchestrated by a coordinator node.
- **Go Worker Nodes:** The worker nodes, implemented as Go servers, execute Cairo code, interacting with rust provers and verifiers to compute tasks and generate proofs based on the computation trace.

# Cairo0 Recursive Verifier
<img width="1347" alt="recursive_verifier" src="https://github.com/STARKScale/ethdenver24-starknet-hh/assets/91217444/bb50675a-d7a2-4a56-9f76-4b5892172d76">

## Recursive Verifier

A cornerstone of our project, the recursive verifier, draws inspiration from the SHARP prover and operates within a recursive layout. This methodology is pivotal for our system's capability to handle complex zero-knowledge computations at scale. Here's how it functions:

- **Execution in Recursive Layout**: 
  - Executes compiled Cairo0 code within the Cairo lang Python VM. 
  - Generates memory, computation traces, and public inputs from the compiled program.

- **Generation of Proofs**: 
  - Inputs the results and configures the CPU AIR (Algebraic Intermediate Representation) to obtain proofs through the Stone prover.

- **Proof Verification and Integration**: 
  - Utilizes the Cairo0 verifier to check the validity of proofs generated by the Stone prover.
  - Integrates these proofs into a singular, verifiable proof leveraging the computation trace.

- **Iterative Application for Proof Reduction**: 
  - Applies the recursive verifier iteratively to condense multiple proofs into one comprehensive proof, streamlining the verification process.

This innovative approach not only enhances the efficiency and scalability of our system but also pushes the boundaries of what's possible in zero-knowledge computation.


# Current Limitations 
While our project successfully demonstrates the potential of integrating distributed systems with IVC for ZK computations, we acknowledge the current limitation in recursively verifying Cairo1 proofs. As a proof of concept, we have developed the system using Cairo0. Future updates will include transitioning to a Cairo1 recursive proof system, contingent on StarkNet releasing a Cairo1 verifier.

## Future Integration with Amazon Web Services (AWS)
Our initial implementation showcases the potential of combining zero-knowledge computations with distributed systems on a single-node setup. To truly harness the power of distributed computing and enhance scalability, reliability, and performance, we plan to expand our architecture to integrate seamlessly with Amazon Web Services (AWS).
![architecture](https://github.com/STARKScale/ethdenver24-starknet-hh/assets/91217444/544d1ece-c06a-4a3f-a278-6876370a3ef2)

## Contributors
Felix Meng, Tommy Hang, Trevor Trinh, Liwen Ouyang

Incredbile thanks to our mentors, guides, and friends:
- David
- Pierre
- Ivan
- Marcelo
- Gnana
- Gurk
- Beja

